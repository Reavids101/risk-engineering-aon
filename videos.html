<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>Risk Engineering Videos</title>
    <style>

        #player {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
            background-color: white;
        }

        #video-feed {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
        margin-top: 20px;
        background-color: white;
        }

        .video {
  display: inline-block;
  width: 300px;
  height: 300px;
  margin: 0;
  padding: 10px;
  box-sizing: border-box;
  text-align: center;
}

.video video {
  width: 300px;
  height: 300px;
  object-fit: cover;
  border-radius: 5px;
}

.video h2 {
  margin-top: 0;
}

.video p {
  margin-bottom: 0;
}
    </style>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <section class="navbar">
        <img src="/risk-engineering-aon/AON.svg">
        <h1>Risk Engineering Videos</h1>
        <a href="index.html">Home</a>
        <a href="articles.html">Articles</a>
        <a href="videos.html">Videos</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        <input type="text" id="searchBox" onkeyup="filterVideos()" placeholder="Search for items...">
        </section>
        <div id="player"></div>
        <div id="video-feed"></div>
        <script src="https://apis.google.com/js/api.js"></script>
        <script>
            var player;
var videoFeedElement = document.getElementById('video-feed');

// Define your video objects manually
var videos = [
    {
        id: 'Grenfell Tower panels cladding fire tests',
        title: 'Grenfell Tower panels cladding fire tests',
        duration: 'PT2M30S'  // Example duration in ISO 8601 format
    },
    {
        id: 'Perfume fire_static charges',
        title: 'Perfume fire_static charges',
        duration: 'PT3M45S'  // Example duration in ISO 8601 format
    },
    // Add more video objects as needed
];

var promises = videos.map(function(video) {
    var videoElement = document.createElement('video');
    videoElement.setAttribute('src', video.id + '.mp4');
    videoElement.setAttribute('type', 'video/mp4');
    videoElement.setAttribute('controls', '');

    var titleElement = document.createElement('h2');
    titleElement.textContent = video.title;

    var durationElement = document.createElement('p');
    durationElement.textContent = formatDuration(video.duration);

    var videoContainerElement = document.createElement('div');
    videoContainerElement.appendChild(titleElement);
    videoContainerElement.appendChild(durationElement);
    videoContainerElement.appendChild(videoElement);

    videoFeedElement.appendChild(videoContainerElement);
});

Promise.all(promises).then(function() {
    console.log('videos:', videos);
    onVideoPlayerReady(videos);
});

function onVideoPlayerReady(videosList) {
    if (videosList && videosList.length > 0) {
        player = videoFeedElement.children[0].getElementsByTagName('video')[0];
        player.addEventListener('ended', onVideoPlayerEnded);
    } else {
        console.error('No videos found');
    }
}

function onVideoPlayerEnded(event) {
    // Play the next video
    var nextVideo = event.target.parentNode.nextElementSibling;
    if (nextVideo) {
        nextVideo.getElementsByTagName('video')[0].play();
    }
}

// Format video duration from ISO 8601 format to hh:mm:ss
function formatDuration(duration) {
    var match = duration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);

    var hours = (parseInt(match[1]) || 0);
    var minutes = (parseInt(match[2]) || 0);
    var seconds = (parseInt(match[3]) || 0);

    var totalSeconds = (hours * 60 * 60) + (minutes * 60) + seconds;

    var formattedDuration = '';

    if (hours > 0) {
        formattedDuration += hours + ':';
    }

    if (minutes < 10) {
        formattedDuration += '0';
    }
    formattedDuration += minutes + ':';

    if (seconds < 10) {
        formattedDuration += '0';
    }
    formattedDuration += seconds;

    return formattedDuration;
}

        </script>
</body>
<footer>
    <!-- Add your footer content here -->
</footer>